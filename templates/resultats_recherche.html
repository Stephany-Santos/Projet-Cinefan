<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recherche</title>
<link href="{{ url_for('static', filename='css/cinefan.css') }}" rel="stylesheet">
</head>

<body>
    <nav class="barre-de-navigation">
        <div class="cadre-nav">
            <a class="struct-de-navigation" href="/">ğŸ¬ CinÃ©Fan</a>
            <div class="nav-right">
                <a class="navig-mini" href="/commu">CommunautÃ©</a>
                <a class="navig-mini" href="/stats">Statistiques</a>
                <a class="navig-mini" href="/genres">Genres</a>
                {%if UserConnecte==None%}
                <a class="navig-mini" href="/profil">Se connecter</a>
                {%else%}
                <a class="navig-mini" href="/profil">Profil</a>
                {%endif%}
                <form action="/search" method="get" class="barre-recherche">
                    <input type="text" name="q" placeholder="Rechercher">
                    <button type="submit">ğŸ”</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="en-tete-resultats">
        <div class="contenu-resultats">
            <h1 class="titre">RÃ©sultats de recherche</h1>
            <div class="sous-titre">Terme: "<strong>{{ terme }}</strong>" â€” 
                {{ nb_resultats }} rÃ©sultat{% if nb_resultats != 1 %}s{% endif %} trouvÃ©{% if nb_resultats != 1 %}s{% endif %}
            </div>
        </div>
    </div>

    <div class="contenu-resultats">
        {% if nb_resultats == 0 %}
        <div class="pas-resultats">
            <p>Aucun rÃ©sultat trouvÃ© pour "<strong>{{ terme }}</strong>"</p>
        </div>
        {% else %}

        <!-- MÃ‰DIAS -->
        {% set medias = resultats | selectattr('type_resultat', 'equalto', 'media') | list %}
        {% if medias %}
        <div class="section-resultats">
            <h2 style="style-titre">ğŸ¬ Films & SÃ©ries ({{ medias | length }})</h2>
            <div class="cadre">
                <div class="ligne">
                    {% for resultat in medias %}
                    <div class="colonne-3">
                        <div class="affiche">
                            <a href="/media/{{ resultat.id }}" class="cadre-media">
                                <div class="cadre-media-image">
                                    {% if resultat.url_image %}
                                    <img src="{{ resultat.url_image }}" alt="{{ resultat.alt }}">
                                    {% else %}
                                    <div style="...">ğŸ“º</div>
                                    {% endif %}
                                </div>
                            </a>
                            <div class="style-titre">
                                <h3>{{ resultat.titre }}</h3>
                                <div class="...">{{ resultat.genre }} â€¢ {{ resultat.parution }}</div>
                                <div class="...">{{ resultat.description }}</div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        
        <!-- ARTISTES -->
        {% set artistes = resultats | selectattr('type_resultat', 'equalto', 'artiste') | list %}
        {% if artistes %}
        <div class="section-resultats">
            <h2 style="style-titre">ğŸ­ Artistes ({{ artistes | length }})</h2>
            <div class="cadre">
                {% for resultat in artistes %}
                <a href="/artiste/{{ resultat.id }}" class="cadre-media">
                <div class="affiche">
                    <div style="...">ğŸ­</div>
                    <h3>{{ resultat.prenom }} {{ resultat.nom }}</h3>
                    <div style="...">Artiste</div>
                </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        <!-- PERSONNAGES -->
        {% set personnages = resultats | selectattr('type_resultat', 'equalto', 'personnage') | list %}
        {% if personnages %}
        <div class="section-resultats">
            <h2 style="style-titre">ğŸ§š Personnages ({{ personnages | length }})</h2>
            <div class="cadre">
                {% for resultat in personnages %}
                <div class="affiche">
                    <div style="...">ğŸ§š</div>
                    <h3>{{ resultat.prenom }} {{ resultat.nom }}</h3>
                    <div class="...">Dans: <strong>{{ resultat.titre }}</strong></div>
                    {% if resultat.description %}
                    <div style="...">{{ resultat.description[:100] }}...</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        {% endif %}
    </div>

</body>
</html>