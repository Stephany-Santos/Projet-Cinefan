<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profil de {{ info.nom }}</title>
<link href="{{ url_for('static', filename='css/cinefan.css') }}" rel="stylesheet">
</head>

<body>
    <nav class="barre-de-navigation">
        <div class="cadre-nav">
            <a class="struct-de-navigation" href="/">üé¨ Cin√©Fan</a>
            <div class="nav-right">
                <a class="navig-mini" href="/commu">Communaut√©</a>
                <a class="navig-mini" href="/stats">Statistiques</a>
                <a class="navig-mini" href="/genres">Genres</a>
                {%if UserConnecte==None%}
                <a class="navig-mini" href="/profil">Se connecter</a>
                {%else%}
                <a class="navig-mini" href="/profil">Profil</a>
                {%endif%}
                <form action="/search" method="get" class="barre-recherche">
                    <input type="text" name="q" placeholder="Rechercher">
                    <button type="submit">üîç</button>
                </form>
            </div>
        </div>
    </nav>

    <main class="mainPage">
        <section class="userProfile">
            <article id="basicInfo">
                <div>
                    <h2>{{info.nom}}
                        {{ activiteBadge.emoji }}
                        {%if info.typededompte == 'admin':%}
                        üõ†Ô∏è
                        {%elif info.typedecompte == 'source':%}
                        ‚úîÔ∏è
                        {%endif%}
                    </h2>
                    <p>@{{info.pseudo}} - {{ activiteBadge.label }}</p>
                    {%if info.biographie == '': %}
                        <p>Pas de biographie pour le moment.</p>
                    {%else%}
                        <p>{{info.biographie}}</p>
                    {%endif%}
                </div>
            </article>
            <h4 class="titre">Favoris</h4>
                {%if favs == []%}
                    <p>{{info.nom}} n'a pas encore ajout√© de favoris.</p>
                {%else%}
            <!-- <article id='favs'> -->
                <div class = grille-medias>
                {% for i in favs[:6]%}
                    <div class="grille-medias">
                        {%for media in i%}
                            <a href="/media/{{ media.id }}" class="cadre-media">
                                <div class="cadre-media-image">
                                    {% if media.url_image %}
                                    <img src="{{ media.url_image }}" alt="{{ media.alt }}">
                                    {% else %}
                                    <div style="font-size: 48px;">üì∫</div>
                                    {% endif %}
                                </div>
                                <div class="cadre-media-contenu">
                                    <h3>{{ media.titre }}</h3>
                                    <div class="cadre-media-info">{{ media.genre }} ‚Ä¢ {{ media.parution }}</div>
                                    <div class="cadre-media-description">{{ media.description }}</div>
                                </div>
                            </a>
                            {% endfor %}
                        </div>
                    {%endfor%}
                {%endif%}
                </div>
            <!-- </article> -->
        </section>
        {%if ajouts[0] != {}%}
        <section class="activity" id="ajoutsCommu">
            <h4>Ajouts</h4>
<<<<<<< HEAD
            {%for cat, vals in activite.items()%}
                {%for elt in vals[:8]%}
=======
            {%for cat, vals in ajouts.items()%}
                {%for elt in vals%}
>>>>>>> 42705a222b260a8f7ee42bb7cfb80b0db2d9c8d3
                    <div class="commentaire">
                        <p>{{elt.titre}}</p>
                        <p><a href="/{{cat}}/{{elt.id}}">Voir plus</a></p>
                    </div>
                {%endfor%}
            {%endfor%}
        </section>
        {%endif%}
        <aside class='activity'>
            <br>    
            <div>
                <h4>Derniers commentaires</h4>
                {%if comms == []%}
                    <p>{{info.nom}} n'a pas encore comment√©.</p>
                {%else%}
                    {%for elt in comms%}
                        {%if elt.texte != '' or elt.texte != None%}
                            <div class='commentaire'>
                            <a href="/media/{{ elt.id }}"><b>{{elt.titre}}</b><a>
                            <p>{{elt.date}} <p>
                            <p><i>"{{elt.texte}}"</i><p>
                            {%if elt.favori == TRUE%}
                            <p>‚ù§Ô∏è - Note : {{elt.note}}/5<p>
                            {%else%}
                            <p>Note : {{elt.note}}/5<p>
                            {%endif%}
                            </div>
                        {%endif%}
                    {%endfor%}
                {%endif%}
            </div>
            <br>
            <div>
                <h4>Statistiques personelles </h4>
                {%if stats == []%}
                    <p>{{info.nom}} n'a pas assez d'activit√© pour avoir de statistiques.</p>
                {%else%}
                    {%for text in stats[0]%}
                        <p> {{info.nom}} √† laiss√© {{ text.nombredecritiques }} commentaires,
                    {%endfor%}
                    {%if stats[1] != []%}
                        {%for genre in stats[1]%}
                         et son genre le plus comment√© est {{ genre.genre }} avec {{ genre.nombredecritiques }} commentaires!
                        {%endfor%}
                    {%endif%}
                        </p>
                    {%if stats[2] != []%}
                        <p> Son genre pr√©f√©r√© est 
                            {{ stats[2].intitule_genre }} avec une moyenne de {{stats[2].moyenne_note}}/5.
                            
                    {%endif%}
                {%endif%}
                {%if ajouts[0] != {}%}
                    {%for cat, vals in ajouts.items()%}
                        <p class='stats'> {{info.nom}} √† ajout√© {{ vals|length }} {{ cat }}.<p>
                    {%endfor%}
                {%endif%}
            </div>
        </aside>
    </main>
</body>
</html>